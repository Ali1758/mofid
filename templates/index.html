<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mofid Crawler</title>
    {% load bootstrap4 %}
    {% bootstrap_css %}

    <style>
        .container {
            font-family: B Mitra;
            font-size: 1.4em;
            margin-top: 100px;
        }

        .link, .link:hover {
            color: black;
            text-decoration: none;
            text-align: right;
        }

        label {
            font-size: .8em;
        }

        .form-group > label {
            font-size: 1em;
            text-align: right;
        }

        .card-header, .card-footer {
            text-align: center;
            direction: rtl;
        }

        .result {
            text-align: center;
            font-size: .9em;
        }

        .starter {
            direction: rtl;
            text-align: right
        }

    </style>

</head>

<body>
<div>
    {% include "Header.html" %}
</div>

<div class="container" style="padding-bottom: 50px;">
    {% block content %}
        {% if user.is_authenticated and user.has_access %}
            <div class="col-md-12" style="margin-bottom: 50px;">
                {% for item in progress %}
                    <div class="row">
                        <h5>{{ item.name }}</h5>
                        <div class="progress" style="width: 97%;">
                            <div class="progress-bar progress-bar-striped progress-bar-animated bg-success"
                                role="progressbar" aria-valuenow="{{ item.percentage }}" aria-valuemin="0"
                                aria-valuemax="100"
                                style="width: {{ item.percentage }}%; font-size: 1.5em; color: greenyellow;"> {{ item.percentage }}%
                            </div>
                        </div>
                        <div>
                            <a class="link" href="{{ item.restart_url }}">
                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-repeat" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>
                                    <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>
                                </svg>
                            </a>
                        </div>
                    </div>
                {% endfor %}
            </div>

            <div class="row">
                <div class="col-sm-12 result">
                    {% if messages %}
                        {% for message in messages %}
                            {% bootstrap_messages message %}
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="col-sm-12 col-md-5">
                    <div class="card">
                        <div class="card-header">
                            آخرین نتایج
                        </div>
                        <div class="card-body result">
                            <ul class="list-group list-group-flush">
                            {% for item in items %}
                                <li class="list-group-item">
                                    <a href="{{ item.download_link }}">{{ item.name }}</a>
                                </li>
                            {% endfor %}
                            </ul>
                        </div>
                        <div class="card-footer">
                            <a class="link" href="{% url "download" %}">جهت مشاهده نتایج بیشتر، کلیک نمایید</a>
                        </div>
                    </div>
                </div>
                <div class="col-sm-12 col-md-7">
                    <div class="card">
                        <div class="card-header">
                            شروع فرآیند جدید
                        </div>
                        <div class="card-body starter">
                            <form action="" method="post">
                                {% csrf_token %}
                                {% bootstrap_form form layout="horizontal" label_class="col-md-5" field_class="col-md-7" %}
                                <div class="row">
                                    <span class="col-sm-6"><input class="btn btn-block btn-primary" type="submit"
                                                                  name="" value="ادامه"></span>
                                    <span class="col-sm-6"><input class="btn btn-block btn-danger" type="reset" name=""
                                                                  value="تنظیمات پیشفرض"></span>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

        {% elif user.is_authenticated and not user.has_access %}
            <div style="text-align: center;">شما اجازه دسترسی به این قسمت را ندارید</div>

        {% else %}
            <div class="col-sm-12 col-md-8 offset-md-2"></div>
            <div style="text-align: center;">Please Log in or <a href="{% url "Login" %}">click here</a></div>
        {% endif %}
    {% endblock %}
</div>





{% bootstrap_jquery %}
{% bootstrap_javascript %}

</body>
</html>